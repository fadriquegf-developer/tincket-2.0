jQuery(document).ready(function(a){var d=function(e){e.removeClass("la-cloud-upload").addClass("la la-spin la-spinner")},r=function(e){e.removeClass("la-spin la-spinner").addClass("la la-cloud-upload")};a(".btn-load-emails").click(function(){var e=a(this),c=a(a(this).data("emails-target")),t=[];d(e.find(".la"));var f=a(".interest-checkbox, input[name^='interests[']");f.each(function(s){if(a(this).is(":checked")){var i=a(this).data("interest");if(!i){var n=a(this).attr("name"),o=n.match(/interests\[([^\]]+)\]/);o&&(i=o[1])}i&&t.push(i)}});var l=a(this).data("emails-api");t.length>0&&(l=a(this).data("emails-for-api")+"?interests[]="+t.join("&interests[]=")),a.get(l,function(s){var i=s.map(n=>n.email).join(",");c.val(i),r(e.find(".la"))}).fail(function(s,i,n){console.error("[MAILING DEBUG] Error en petici√≥n:",{status:i,error:n,response:s.responseText}),r(e.find(".la")),alert("Error al cargar emails: "+n)})})});
